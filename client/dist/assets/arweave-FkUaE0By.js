var ht=Object.defineProperty;var dt=(w,U,b)=>U in w?ht(w,U,{enumerable:!0,configurable:!0,writable:!0,value:b}):w[U]=b;var I=(w,U,b)=>dt(w,typeof U!="symbol"?U+"":U,b);var de={},Ae={},Se={},be={exports:{}},gt=be.exports,Ge;function pt(){return Ge||(Ge=1,function(w){(function(U){var b,m=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,u=Math.floor,s="[BigNumber Error] ",h=s+"Number primitive has more than 15 significant digits: ",p=1e14,y=14,O=9007199254740991,A=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],C=1e7,B=1e9;function E(T){var _,x,$,S=N.prototype={constructor:N,toString:null,valueOf:null},j=new N(1),H=20,G=4,Y=-7,ee=21,ie=-1e7,re=1e7,ce=!1,ge=1,le=0,De={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},he="0123456789abcdefghijklmnopqrstuvwxyz",qe=!0;function N(e,t){var r,l,i,c,g,n,o,d,f=this;if(!(f instanceof N))return new N(e,t);if(t==null){if(e&&e._isBigNumber===!0){f.s=e.s,!e.c||e.e>re?f.c=f.e=null:e.e<ie?f.c=[f.e=0]:(f.e=e.e,f.c=e.c.slice());return}if((n=typeof e=="number")&&e*0==0){if(f.s=1/e<0?(e=-e,-1):1,e===~~e){for(c=0,g=e;g>=10;g/=10,c++);c>re?f.c=f.e=null:(f.e=c,f.c=[e]);return}d=String(e)}else{if(!m.test(d=String(e)))return $(f,d,n);f.s=d.charCodeAt(0)==45?(d=d.slice(1),-1):1}(c=d.indexOf("."))>-1&&(d=d.replace(".","")),(g=d.search(/e/i))>0?(c<0&&(c=g),c+=+d.slice(g+1),d=d.substring(0,g)):c<0&&(c=d.length)}else{if(q(t,2,he.length,"Base"),t==10&&qe)return f=new N(e),ae(f,H+f.e+1,G);if(d=String(e),n=typeof e=="number"){if(e*0!=0)return $(f,d,n,t);if(f.s=1/e<0?(d=d.slice(1),-1):1,N.DEBUG&&d.replace(/^0\.0*|\./,"").length>15)throw Error(h+e)}else f.s=d.charCodeAt(0)===45?(d=d.slice(1),-1):1;for(r=he.slice(0,t),c=g=0,o=d.length;g<o;g++)if(r.indexOf(l=d.charAt(g))<0){if(l=="."){if(g>c){c=o;continue}}else if(!i&&(d==d.toUpperCase()&&(d=d.toLowerCase())||d==d.toLowerCase()&&(d=d.toUpperCase()))){i=!0,g=-1,c=0;continue}return $(f,String(e),n,t)}n=!1,d=x(d,t,10,f.s),(c=d.indexOf("."))>-1?d=d.replace(".",""):c=d.length}for(g=0;d.charCodeAt(g)===48;g++);for(o=d.length;d.charCodeAt(--o)===48;);if(d=d.slice(g,++o)){if(o-=g,n&&N.DEBUG&&o>15&&(e>O||e!==u(e)))throw Error(h+f.s*e);if((c=c-g-1)>re)f.c=f.e=null;else if(c<ie)f.c=[f.e=0];else{if(f.e=c,f.c=[],g=(c+1)%y,c<0&&(g+=y),g<o){for(g&&f.c.push(+d.slice(0,g)),o-=y;g<o;)f.c.push(+d.slice(g,g+=y));g=y-(d=d.slice(g)).length}else g-=o;for(;g--;d+="0");f.c.push(+d)}}else f.c=[f.e=0]}N.clone=E,N.ROUND_UP=0,N.ROUND_DOWN=1,N.ROUND_CEIL=2,N.ROUND_FLOOR=3,N.ROUND_HALF_UP=4,N.ROUND_HALF_DOWN=5,N.ROUND_HALF_EVEN=6,N.ROUND_HALF_CEIL=7,N.ROUND_HALF_FLOOR=8,N.EUCLID=9,N.config=N.set=function(e){var t,r;if(e!=null)if(typeof e=="object"){if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(r=e[t],q(r,0,B,t),H=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(r=e[t],q(r,0,8,t),G=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&(r=e[t],r&&r.pop?(q(r[0],-1e9,0,t),q(r[1],0,B,t),Y=r[0],ee=r[1]):(q(r,-1e9,B,t),Y=-(ee=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if(r=e[t],r&&r.pop)q(r[0],-1e9,-1,t),q(r[1],1,B,t),ie=r[0],re=r[1];else if(q(r,-1e9,B,t),r)ie=-(re=r<0?-r:r);else throw Error(s+t+" cannot be zero: "+r);if(e.hasOwnProperty(t="CRYPTO"))if(r=e[t],r===!!r)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ce=r;else throw ce=!r,Error(s+"crypto unavailable");else ce=r;else throw Error(s+t+" not true or false: "+r);if(e.hasOwnProperty(t="MODULO_MODE")&&(r=e[t],q(r,0,9,t),ge=r),e.hasOwnProperty(t="POW_PRECISION")&&(r=e[t],q(r,0,B,t),le=r),e.hasOwnProperty(t="FORMAT"))if(r=e[t],typeof r=="object")De=r;else throw Error(s+t+" not an object: "+r);if(e.hasOwnProperty(t="ALPHABET"))if(r=e[t],typeof r=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(r))qe=r.slice(0,10)=="0123456789",he=r;else throw Error(s+t+" invalid: "+r)}else throw Error(s+"Object expected: "+e);return{DECIMAL_PLACES:H,ROUNDING_MODE:G,EXPONENTIAL_AT:[Y,ee],RANGE:[ie,re],CRYPTO:ce,MODULO_MODE:ge,POW_PRECISION:le,FORMAT:De,ALPHABET:he}},N.isBigNumber=function(e){if(!e||e._isBigNumber!==!0)return!1;if(!N.DEBUG)return!0;var t,r,l=e.c,i=e.e,c=e.s;e:if({}.toString.call(l)=="[object Array]"){if((c===1||c===-1)&&i>=-1e9&&i<=B&&i===u(i)){if(l[0]===0){if(i===0&&l.length===1)return!0;break e}if(t=(i+1)%y,t<1&&(t+=y),String(l[0]).length==t){for(t=0;t<l.length;t++)if(r=l[t],r<0||r>=p||r!==u(r))break e;if(r!==0)return!0}}}else if(l===null&&i===null&&(c===null||c===1||c===-1))return!0;throw Error(s+"Invalid BigNumber: "+e)},N.maximum=N.max=function(){return je(arguments,-1)},N.minimum=N.min=function(){return je(arguments,1)},N.random=function(){var e=9007199254740992,t=Math.random()*e&2097151?function(){return u(Math.random()*e)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(r){var l,i,c,g,n,o=0,d=[],f=new N(j);if(r==null?r=H:q(r,0,B),g=a(r/y),ce)if(crypto.getRandomValues){for(l=crypto.getRandomValues(new Uint32Array(g*=2));o<g;)n=l[o]*131072+(l[o+1]>>>11),n>=9e15?(i=crypto.getRandomValues(new Uint32Array(2)),l[o]=i[0],l[o+1]=i[1]):(d.push(n%1e14),o+=2);o=g/2}else if(crypto.randomBytes){for(l=crypto.randomBytes(g*=7);o<g;)n=(l[o]&31)*281474976710656+l[o+1]*1099511627776+l[o+2]*4294967296+l[o+3]*16777216+(l[o+4]<<16)+(l[o+5]<<8)+l[o+6],n>=9e15?crypto.randomBytes(7).copy(l,o):(d.push(n%1e14),o+=7);o=g/7}else throw ce=!1,Error(s+"crypto unavailable");if(!ce)for(;o<g;)n=t(),n<9e15&&(d[o++]=n%1e14);for(g=d[--o],r%=y,g&&r&&(n=A[y-r],d[o]=u(g/n)*n);d[o]===0;d.pop(),o--);if(o<0)d=[c=0];else{for(c=-1;d[0]===0;d.splice(0,1),c-=y);for(o=1,n=d[0];n>=10;n/=10,o++);o<y&&(c-=y-o)}return f.e=c,f.c=d,f}}(),N.sum=function(){for(var e=1,t=arguments,r=new N(t[0]);e<t.length;)r=r.plus(t[e++]);return r},x=function(){var e="0123456789";function t(r,l,i,c){for(var g,n=[0],o,d=0,f=r.length;d<f;){for(o=n.length;o--;n[o]*=l);for(n[0]+=c.indexOf(r.charAt(d++)),g=0;g<n.length;g++)n[g]>i-1&&(n[g+1]==null&&(n[g+1]=0),n[g+1]+=n[g]/i|0,n[g]%=i)}return n.reverse()}return function(r,l,i,c,g){var n,o,d,f,v,P,D,K,J=r.indexOf("."),Z=H,F=G;for(J>=0&&(f=le,le=0,r=r.replace(".",""),K=new N(l),P=K.pow(r.length-J),le=f,K.c=t(k(L(P.c),P.e,"0"),10,i,e),K.e=K.c.length),D=t(r,l,i,g?(n=he,e):(n=e,he)),d=f=D.length;D[--f]==0;D.pop());if(!D[0])return n.charAt(0);if(J<0?--d:(P.c=D,P.e=d,P.s=c,P=_(P,K,Z,F,i),D=P.c,v=P.r,d=P.e),o=d+Z+1,J=D[o],f=i/2,v=v||o<0||D[o+1]!=null,v=F<4?(J!=null||v)&&(F==0||F==(P.s<0?3:2)):J>f||J==f&&(F==4||v||F==6&&D[o-1]&1||F==(P.s<0?8:7)),o<1||!D[0])r=v?k(n.charAt(1),-Z,n.charAt(0)):n.charAt(0);else{if(D.length=o,v)for(--i;++D[--o]>i;)D[o]=0,o||(++d,D=[1].concat(D));for(f=D.length;!D[--f];);for(J=0,r="";J<=f;r+=n.charAt(D[J++]));r=k(r,d,n.charAt(0))}return r}}(),_=function(){function e(l,i,c){var g,n,o,d,f=0,v=l.length,P=i%C,D=i/C|0;for(l=l.slice();v--;)o=l[v]%C,d=l[v]/C|0,g=D*o+d*P,n=P*o+g%C*C+f,f=(n/c|0)+(g/C|0)+D*d,l[v]=n%c;return f&&(l=[f].concat(l)),l}function t(l,i,c,g){var n,o;if(c!=g)o=c>g?1:-1;else for(n=o=0;n<c;n++)if(l[n]!=i[n]){o=l[n]>i[n]?1:-1;break}return o}function r(l,i,c,g){for(var n=0;c--;)l[c]-=n,n=l[c]<i[c]?1:0,l[c]=n*g+l[c]-i[c];for(;!l[0]&&l.length>1;l.splice(0,1));}return function(l,i,c,g,n){var o,d,f,v,P,D,K,J,Z,F,W,Q,Ee,Me,Fe,oe,ye,se=l.s==i.s?1:-1,te=l.c,X=i.c;if(!te||!te[0]||!X||!X[0])return new N(!l.s||!i.s||(te?X&&te[0]==X[0]:!X)?NaN:te&&te[0]==0||!X?se*0:se/0);for(J=new N(se),Z=J.c=[],d=l.e-i.e,se=c+d+1,n||(n=p,d=R(l.e/y)-R(i.e/y),se=se/y|0),f=0;X[f]==(te[f]||0);f++);if(X[f]>(te[f]||0)&&d--,se<0)Z.push(1),v=!0;else{for(Me=te.length,oe=X.length,f=0,se+=2,P=u(n/(X[0]+1)),P>1&&(X=e(X,P,n),te=e(te,P,n),oe=X.length,Me=te.length),Ee=oe,F=te.slice(0,oe),W=F.length;W<oe;F[W++]=0);ye=X.slice(),ye=[0].concat(ye),Fe=X[0],X[1]>=n/2&&Fe++;do{if(P=0,o=t(X,F,oe,W),o<0){if(Q=F[0],oe!=W&&(Q=Q*n+(F[1]||0)),P=u(Q/Fe),P>1)for(P>=n&&(P=n-1),D=e(X,P,n),K=D.length,W=F.length;t(D,F,K,W)==1;)P--,r(D,oe<K?ye:X,K,n),K=D.length,o=1;else P==0&&(o=P=1),D=X.slice(),K=D.length;if(K<W&&(D=[0].concat(D)),r(F,D,W,n),W=F.length,o==-1)for(;t(X,F,oe,W)<1;)P++,r(F,oe<W?ye:X,W,n),W=F.length}else o===0&&(P++,F=[0]);Z[f++]=P,F[0]?F[W++]=te[Ee]||0:(F=[te[Ee]],W=1)}while((Ee++<Me||F[0]!=null)&&se--);v=F[0]!=null,Z[0]||Z.splice(0,1)}if(n==p){for(f=1,se=Z[0];se>=10;se/=10,f++);ae(J,c+(J.e=f+d*y-1)+1,g,v)}else J.e=d,J.r=+v;return J}}();function Le(e,t,r,l){var i,c,g,n,o;if(r==null?r=G:q(r,0,8),!e.c)return e.toString();if(i=e.c[0],g=e.e,t==null)o=L(e.c),o=l==1||l==2&&(g<=Y||g>=ee)?V(o,g):k(o,g,"0");else if(e=ae(new N(e),t,r),c=e.e,o=L(e.c),n=o.length,l==1||l==2&&(t<=c||c<=Y)){for(;n<t;o+="0",n++);o=V(o,c)}else if(t-=g,o=k(o,c,"0"),c+1>n){if(--t>0)for(o+=".";t--;o+="0");}else if(t+=c-n,t>0)for(c+1==n&&(o+=".");t--;o+="0");return e.s<0&&i?"-"+o:o}function je(e,t){for(var r,l,i=1,c=new N(e[0]);i<e.length;i++)l=new N(e[i]),(!l.s||(r=M(c,l))===t||r===0&&c.s===t)&&(c=l);return c}function $e(e,t,r){for(var l=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,l++);return(r=l+r*y-1)>re?e.c=e.e=null:r<ie?e.c=[e.e=0]:(e.e=r,e.c=t),e}$=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,r=/^\.([^.]+)$/,l=/^-?(Infinity|NaN)$/,i=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(c,g,n,o){var d,f=n?g:g.replace(i,"");if(l.test(f))c.s=isNaN(f)?null:f<0?-1:1;else{if(!n&&(f=f.replace(e,function(v,P,D){return d=(D=D.toLowerCase())=="x"?16:D=="b"?2:8,!o||o==d?P:v}),o&&(d=o,f=f.replace(t,"$1").replace(r,"0.$1")),g!=f))return new N(f,d);if(N.DEBUG)throw Error(s+"Not a"+(o?" base "+o:"")+" number: "+g);c.s=null}c.c=c.e=null}}();function ae(e,t,r,l){var i,c,g,n,o,d,f,v=e.c,P=A;if(v){e:{for(i=1,n=v[0];n>=10;n/=10,i++);if(c=t-i,c<0)c+=y,g=t,o=v[d=0],f=u(o/P[i-g-1]%10);else if(d=a((c+1)/y),d>=v.length)if(l){for(;v.length<=d;v.push(0));o=f=0,i=1,c%=y,g=c-y+1}else break e;else{for(o=n=v[d],i=1;n>=10;n/=10,i++);c%=y,g=c-y+i,f=g<0?0:u(o/P[i-g-1]%10)}if(l=l||t<0||v[d+1]!=null||(g<0?o:o%P[i-g-1]),l=r<4?(f||l)&&(r==0||r==(e.s<0?3:2)):f>5||f==5&&(r==4||l||r==6&&(c>0?g>0?o/P[i-g]:0:v[d-1])%10&1||r==(e.s<0?8:7)),t<1||!v[0])return v.length=0,l?(t-=e.e+1,v[0]=P[(y-t%y)%y],e.e=-t||0):v[0]=e.e=0,e;if(c==0?(v.length=d,n=1,d--):(v.length=d+1,n=P[y-c],v[d]=g>0?u(o/P[i-g]%P[g])*n:0),l)for(;;)if(d==0){for(c=1,g=v[0];g>=10;g/=10,c++);for(g=v[0]+=n,n=1;g>=10;g/=10,n++);c!=n&&(e.e++,v[0]==p&&(v[0]=1));break}else{if(v[d]+=n,v[d]!=p)break;v[d--]=0,n=1}for(c=v.length;v[--c]===0;v.pop());}e.e>re?e.c=e.e=null:e.e<ie&&(e.c=[e.e=0])}return e}function ue(e){var t,r=e.e;return r===null?e.toString():(t=L(e.c),t=r<=Y||r>=ee?V(t,r):k(t,r,"0"),e.s<0?"-"+t:t)}return S.absoluteValue=S.abs=function(){var e=new N(this);return e.s<0&&(e.s=1),e},S.comparedTo=function(e,t){return M(this,new N(e,t))},S.decimalPlaces=S.dp=function(e,t){var r,l,i,c=this;if(e!=null)return q(e,0,B),t==null?t=G:q(t,0,8),ae(new N(c),e+c.e+1,t);if(!(r=c.c))return null;if(l=((i=r.length-1)-R(this.e/y))*y,i=r[i])for(;i%10==0;i/=10,l--);return l<0&&(l=0),l},S.dividedBy=S.div=function(e,t){return _(this,new N(e,t),H,G)},S.dividedToIntegerBy=S.idiv=function(e,t){return _(this,new N(e,t),0,1)},S.exponentiatedBy=S.pow=function(e,t){var r,l,i,c,g,n,o,d,f,v=this;if(e=new N(e),e.c&&!e.isInteger())throw Error(s+"Exponent not an integer: "+ue(e));if(t!=null&&(t=new N(t)),n=e.e>14,!v.c||!v.c[0]||v.c[0]==1&&!v.e&&v.c.length==1||!e.c||!e.c[0])return f=new N(Math.pow(+ue(v),n?e.s*(2-z(e)):+ue(e))),t?f.mod(t):f;if(o=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new N(NaN);l=!o&&v.isInteger()&&t.isInteger(),l&&(v=v.mod(t))}else{if(e.e>9&&(v.e>0||v.e<-1||(v.e==0?v.c[0]>1||n&&v.c[1]>=24e7:v.c[0]<8e13||n&&v.c[0]<=9999975e7)))return c=v.s<0&&z(e)?-0:0,v.e>-1&&(c=1/c),new N(o?1/c:c);le&&(c=a(le/y+2))}for(n?(r=new N(.5),o&&(e.s=1),d=z(e)):(i=Math.abs(+ue(e)),d=i%2),f=new N(j);;){if(d){if(f=f.times(v),!f.c)break;c?f.c.length>c&&(f.c.length=c):l&&(f=f.mod(t))}if(i){if(i=u(i/2),i===0)break;d=i%2}else if(e=e.times(r),ae(e,e.e+1,1),e.e>14)d=z(e);else{if(i=+ue(e),i===0)break;d=i%2}v=v.times(v),c?v.c&&v.c.length>c&&(v.c.length=c):l&&(v=v.mod(t))}return l?f:(o&&(f=j.div(f)),t?f.mod(t):c?ae(f,le,G,g):f)},S.integerValue=function(e){var t=new N(this);return e==null?e=G:q(e,0,8),ae(t,t.e+1,e)},S.isEqualTo=S.eq=function(e,t){return M(this,new N(e,t))===0},S.isFinite=function(){return!!this.c},S.isGreaterThan=S.gt=function(e,t){return M(this,new N(e,t))>0},S.isGreaterThanOrEqualTo=S.gte=function(e,t){return(t=M(this,new N(e,t)))===1||t===0},S.isInteger=function(){return!!this.c&&R(this.e/y)>this.c.length-2},S.isLessThan=S.lt=function(e,t){return M(this,new N(e,t))<0},S.isLessThanOrEqualTo=S.lte=function(e,t){return(t=M(this,new N(e,t)))===-1||t===0},S.isNaN=function(){return!this.s},S.isNegative=function(){return this.s<0},S.isPositive=function(){return this.s>0},S.isZero=function(){return!!this.c&&this.c[0]==0},S.minus=function(e,t){var r,l,i,c,g=this,n=g.s;if(e=new N(e,t),t=e.s,!n||!t)return new N(NaN);if(n!=t)return e.s=-t,g.plus(e);var o=g.e/y,d=e.e/y,f=g.c,v=e.c;if(!o||!d){if(!f||!v)return f?(e.s=-t,e):new N(v?g:NaN);if(!f[0]||!v[0])return v[0]?(e.s=-t,e):new N(f[0]?g:G==3?-0:0)}if(o=R(o),d=R(d),f=f.slice(),n=o-d){for((c=n<0)?(n=-n,i=f):(d=o,i=v),i.reverse(),t=n;t--;i.push(0));i.reverse()}else for(l=(c=(n=f.length)<(t=v.length))?n:t,n=t=0;t<l;t++)if(f[t]!=v[t]){c=f[t]<v[t];break}if(c&&(i=f,f=v,v=i,e.s=-e.s),t=(l=v.length)-(r=f.length),t>0)for(;t--;f[r++]=0);for(t=p-1;l>n;){if(f[--l]<v[l]){for(r=l;r&&!f[--r];f[r]=t);--f[r],f[l]+=p}f[l]-=v[l]}for(;f[0]==0;f.splice(0,1),--d);return f[0]?$e(e,f,d):(e.s=G==3?-1:1,e.c=[e.e=0],e)},S.modulo=S.mod=function(e,t){var r,l,i=this;return e=new N(e,t),!i.c||!e.s||e.c&&!e.c[0]?new N(NaN):!e.c||i.c&&!i.c[0]?new N(i):(ge==9?(l=e.s,e.s=1,r=_(i,e,0,3),e.s=l,r.s*=l):r=_(i,e,0,ge),e=i.minus(r.times(e)),!e.c[0]&&ge==1&&(e.s=i.s),e)},S.multipliedBy=S.times=function(e,t){var r,l,i,c,g,n,o,d,f,v,P,D,K,J,Z,F=this,W=F.c,Q=(e=new N(e,t)).c;if(!W||!Q||!W[0]||!Q[0])return!F.s||!e.s||W&&!W[0]&&!Q||Q&&!Q[0]&&!W?e.c=e.e=e.s=null:(e.s*=F.s,!W||!Q?e.c=e.e=null:(e.c=[0],e.e=0)),e;for(l=R(F.e/y)+R(e.e/y),e.s*=F.s,o=W.length,v=Q.length,o<v&&(K=W,W=Q,Q=K,i=o,o=v,v=i),i=o+v,K=[];i--;K.push(0));for(J=p,Z=C,i=v;--i>=0;){for(r=0,P=Q[i]%Z,D=Q[i]/Z|0,g=o,c=i+g;c>i;)d=W[--g]%Z,f=W[g]/Z|0,n=D*d+f*P,d=P*d+n%Z*Z+K[c]+r,r=(d/J|0)+(n/Z|0)+D*f,K[c--]=d%J;K[c]=r}return r?++l:K.splice(0,1),$e(e,K,l)},S.negated=function(){var e=new N(this);return e.s=-e.s||null,e},S.plus=function(e,t){var r,l=this,i=l.s;if(e=new N(e,t),t=e.s,!i||!t)return new N(NaN);if(i!=t)return e.s=-t,l.minus(e);var c=l.e/y,g=e.e/y,n=l.c,o=e.c;if(!c||!g){if(!n||!o)return new N(i/0);if(!n[0]||!o[0])return o[0]?e:new N(n[0]?l:i*0)}if(c=R(c),g=R(g),n=n.slice(),i=c-g){for(i>0?(g=c,r=o):(i=-i,r=n),r.reverse();i--;r.push(0));r.reverse()}for(i=n.length,t=o.length,i-t<0&&(r=o,o=n,n=r,t=i),i=0;t;)i=(n[--t]=n[t]+o[t]+i)/p|0,n[t]=p===n[t]?0:n[t]%p;return i&&(n=[i].concat(n),++g),$e(e,n,g)},S.precision=S.sd=function(e,t){var r,l,i,c=this;if(e!=null&&e!==!!e)return q(e,1,B),t==null?t=G:q(t,0,8),ae(new N(c),e,t);if(!(r=c.c))return null;if(i=r.length-1,l=i*y+1,i=r[i]){for(;i%10==0;i/=10,l--);for(i=r[0];i>=10;i/=10,l++);}return e&&c.e+1>l&&(l=c.e+1),l},S.shiftedBy=function(e){return q(e,-9007199254740991,O),this.times("1e"+e)},S.squareRoot=S.sqrt=function(){var e,t,r,l,i,c=this,g=c.c,n=c.s,o=c.e,d=H+4,f=new N("0.5");if(n!==1||!g||!g[0])return new N(!n||n<0&&(!g||g[0])?NaN:g?c:1/0);if(n=Math.sqrt(+ue(c)),n==0||n==1/0?(t=L(g),(t.length+o)%2==0&&(t+="0"),n=Math.sqrt(+t),o=R((o+1)/2)-(o<0||o%2),n==1/0?t="5e"+o:(t=n.toExponential(),t=t.slice(0,t.indexOf("e")+1)+o),r=new N(t)):r=new N(n+""),r.c[0]){for(o=r.e,n=o+d,n<3&&(n=0);;)if(i=r,r=f.times(i.plus(_(c,i,d,1))),L(i.c).slice(0,n)===(t=L(r.c)).slice(0,n))if(r.e<o&&--n,t=t.slice(n-3,n+1),t=="9999"||!l&&t=="4999"){if(!l&&(ae(i,i.e+H+2,0),i.times(i).eq(c))){r=i;break}d+=4,n+=4,l=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(ae(r,r.e+H+2,1),e=!r.times(r).eq(c));break}}return ae(r,r.e+H+1,G,e)},S.toExponential=function(e,t){return e!=null&&(q(e,0,B),e++),Le(this,e,t,1)},S.toFixed=function(e,t){return e!=null&&(q(e,0,B),e=e+this.e+1),Le(this,e,t)},S.toFormat=function(e,t,r){var l,i=this;if(r==null)e!=null&&t&&typeof t=="object"?(r=t,t=null):e&&typeof e=="object"?(r=e,e=t=null):r=De;else if(typeof r!="object")throw Error(s+"Argument not an object: "+r);if(l=i.toFixed(e,t),i.c){var c,g=l.split("."),n=+r.groupSize,o=+r.secondaryGroupSize,d=r.groupSeparator||"",f=g[0],v=g[1],P=i.s<0,D=P?f.slice(1):f,K=D.length;if(o&&(c=n,n=o,o=c,K-=c),n>0&&K>0){for(c=K%n||n,f=D.substr(0,c);c<K;c+=n)f+=d+D.substr(c,n);o>0&&(f+=d+D.slice(c)),P&&(f="-"+f)}l=v?f+(r.decimalSeparator||"")+((o=+r.fractionGroupSize)?v.replace(new RegExp("\\d{"+o+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):v):f}return(r.prefix||"")+l+(r.suffix||"")},S.toFraction=function(e){var t,r,l,i,c,g,n,o,d,f,v,P,D=this,K=D.c;if(e!=null&&(n=new N(e),!n.isInteger()&&(n.c||n.s!==1)||n.lt(j)))throw Error(s+"Argument "+(n.isInteger()?"out of range: ":"not an integer: ")+ue(n));if(!K)return new N(D);for(t=new N(j),d=r=new N(j),l=o=new N(j),P=L(K),c=t.e=P.length-D.e-1,t.c[0]=A[(g=c%y)<0?y+g:g],e=!e||n.comparedTo(t)>0?c>0?t:d:n,g=re,re=1/0,n=new N(P),o.c[0]=0;f=_(n,t,0,1),i=r.plus(f.times(l)),i.comparedTo(e)!=1;)r=l,l=i,d=o.plus(f.times(i=d)),o=i,t=n.minus(f.times(i=t)),n=i;return i=_(e.minus(r),l,0,1),o=o.plus(i.times(d)),r=r.plus(i.times(l)),o.s=d.s=D.s,c=c*2,v=_(d,l,c,G).minus(D).abs().comparedTo(_(o,r,c,G).minus(D).abs())<1?[d,l]:[o,r],re=g,v},S.toNumber=function(){return+ue(this)},S.toPrecision=function(e,t){return e!=null&&q(e,1,B),Le(this,e,t,2)},S.toString=function(e){var t,r=this,l=r.s,i=r.e;return i===null?l?(t="Infinity",l<0&&(t="-"+t)):t="NaN":(e==null?t=i<=Y||i>=ee?V(L(r.c),i):k(L(r.c),i,"0"):e===10&&qe?(r=ae(new N(r),H+i+1,G),t=k(L(r.c),r.e,"0")):(q(e,2,he.length,"Base"),t=x(k(L(r.c),i,"0"),10,e,l,!0)),l<0&&r.c[0]&&(t="-"+t)),t},S.valueOf=S.toJSON=function(){return ue(this)},S._isBigNumber=!0,T!=null&&N.set(T),N}function R(T){var _=T|0;return T>0||T===_?_:_-1}function L(T){for(var _,x,$=1,S=T.length,j=T[0]+"";$<S;){for(_=T[$++]+"",x=y-_.length;x--;_="0"+_);j+=_}for(S=j.length;j.charCodeAt(--S)===48;);return j.slice(0,S+1||1)}function M(T,_){var x,$,S=T.c,j=_.c,H=T.s,G=_.s,Y=T.e,ee=_.e;if(!H||!G)return null;if(x=S&&!S[0],$=j&&!j[0],x||$)return x?$?0:-G:H;if(H!=G)return H;if(x=H<0,$=Y==ee,!S||!j)return $?0:!S^x?1:-1;if(!$)return Y>ee^x?1:-1;for(G=(Y=S.length)<(ee=j.length)?Y:ee,H=0;H<G;H++)if(S[H]!=j[H])return S[H]>j[H]^x?1:-1;return Y==ee?0:Y>ee^x?1:-1}function q(T,_,x,$){if(T<_||T>x||T!==u(T))throw Error(s+($||"Argument")+(typeof T=="number"?T<_||T>x?" out of range: ":" not an integer: ":" not a primitive number: ")+String(T))}function z(T){var _=T.c.length-1;return R(T.e/y)==_&&T.c[_]%2!=0}function V(T,_){return(T.length>1?T.charAt(0)+"."+T.slice(1):T)+(_<0?"e":"e+")+_}function k(T,_,x){var $,S;if(_<0){for(S=x+".";++_;S+=x);T=S+T}else if($=T.length,++_>$){for(S=x,_-=$;--_;S+=x);T+=S}else _<$&&(T=T.slice(0,_)+"."+T.slice(_));return T}b=E(),b.default=b.BigNumber=b,w.exports?w.exports=b:(U||(U=typeof self<"u"&&self?self:window),U.BigNumber=b)})(gt)}(be)),be.exports}var We;function wt(){if(We)return Se;We=1,Object.defineProperty(Se,"__esModule",{value:!0});const w=pt();class U{constructor(){I(this,"BigNum");this.BigNum=(m,a)=>{let u=w.BigNumber.clone({DECIMAL_PLACES:a});return new u(m)}}winstonToAr(m,{formatted:a=!1,decimals:u=12,trim:s=!0}={}){let h=this.stringToBigNum(m,u).shiftedBy(-12);return a?h.toFormat(u):h.toFixed(u)}arToWinston(m,{formatted:a=!1}={}){let u=this.stringToBigNum(m).shiftedBy(12);return a?u.toFormat():u.toFixed(0)}compare(m,a){let u=this.stringToBigNum(m),s=this.stringToBigNum(a);return u.comparedTo(s)}isEqual(m,a){return this.compare(m,a)===0}isLessThan(m,a){let u=this.stringToBigNum(m),s=this.stringToBigNum(a);return u.isLessThan(s)}isGreaterThan(m,a){let u=this.stringToBigNum(m),s=this.stringToBigNum(a);return u.isGreaterThan(s)}add(m,a){let u=this.stringToBigNum(m);return this.stringToBigNum(a),u.plus(a).toFixed(0)}sub(m,a){let u=this.stringToBigNum(m);return this.stringToBigNum(a),u.minus(a).toFixed(0)}stringToBigNum(m,a=12){return this.BigNum(m,a)}}return Se.default=U,Se}var ke={},ze;function yt(){if(ze)return ke;ze=1,Object.defineProperty(ke,"__esModule",{value:!0});class w{constructor(a){I(this,"METHOD_GET","GET");I(this,"METHOD_POST","POST");I(this,"config");this.applyConfig(a)}applyConfig(a){this.config=this.mergeDefaults(a)}getConfig(){return this.config}mergeDefaults(a){const u=a.protocol||"http",s=a.port||(u==="https"?443:80);return{host:a.host||"127.0.0.1",protocol:u,port:s,timeout:a.timeout||2e4,logging:a.logging||!1,logger:a.logger||console.log,network:a.network}}async get(a,u){return await this.request(a,{...u,method:this.METHOD_GET})}async post(a,u,s){var p;const h=new Headers((s==null?void 0:s.headers)||{});return(p=h.get("content-type"))!=null&&p.includes("application/json")||h.append("content-type","application/json"),h.append("accept","application/json, text/plain, */*"),await this.request(a,{...s,method:this.METHOD_POST,body:typeof u!="string"?JSON.stringify(u):u,headers:h})}async request(a,u){var E;const s=new Headers((u==null?void 0:u.headers)||{}),h=`${this.config.protocol}://${this.config.host}:${this.config.port}`,p=u==null?void 0:u.responseType;u==null||delete u.responseType,a.startsWith("/")&&(a=a.slice(1)),this.config.network&&s.append("x-network",this.config.network),this.config.logging&&this.config.logger(`Requesting: ${h}/${a}`);let y=await fetch(`${h}/${a}`,{...u||{},headers:s});this.config.logging&&this.config.logger(`Response:   ${y.url} - ${y.status}`);const O=y.headers.get("content-type"),A=(E=O==null?void 0:O.match(/charset=([^()<>@,;:\"/[\]?.=\s]*)/i))==null?void 0:E[1],C=y,B=async()=>{if(A)try{C.data=new TextDecoder(A).decode(await y.arrayBuffer())}catch{C.data=await y.text()}else C.data=await y.text()};if(p==="arraybuffer")C.data=await y.arrayBuffer();else if(p==="text")await B();else if(p==="webstream")C.data=U(y.body);else try{let R=await y.clone().json();typeof R!="object"?await B():C.data=await y.json(),R=null}catch{await B()}return C}}ke.default=w;const U=m=>{const a=m;return typeof a[Symbol.asyncIterator]>"u"&&(a[Symbol.asyncIterator]=b(m)),a},b=function(m){return async function*(){const u=m.getReader();try{for(;;){const{done:s,value:h}=await u.read();if(s)return;yield h}}finally{u.releaseLock()}}};return ke}var Ne={},ne={},me={},Je;function mt(){if(Je)return me;Je=1,me.byteLength=h,me.toByteArray=y,me.fromByteArray=C;for(var w=[],U=[],b=typeof Uint8Array<"u"?Uint8Array:Array,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=m.length;a<u;++a)w[a]=m[a],U[m.charCodeAt(a)]=a;U[45]=62,U[95]=63;function s(B){var E=B.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var R=B.indexOf("=");R===-1&&(R=E);var L=R===E?0:4-R%4;return[R,L]}function h(B){var E=s(B),R=E[0],L=E[1];return(R+L)*3/4-L}function p(B,E,R){return(E+R)*3/4-R}function y(B){var E,R=s(B),L=R[0],M=R[1],q=new b(p(B,L,M)),z=0,V=M>0?L-4:L,k;for(k=0;k<V;k+=4)E=U[B.charCodeAt(k)]<<18|U[B.charCodeAt(k+1)]<<12|U[B.charCodeAt(k+2)]<<6|U[B.charCodeAt(k+3)],q[z++]=E>>16&255,q[z++]=E>>8&255,q[z++]=E&255;return M===2&&(E=U[B.charCodeAt(k)]<<2|U[B.charCodeAt(k+1)]>>4,q[z++]=E&255),M===1&&(E=U[B.charCodeAt(k)]<<10|U[B.charCodeAt(k+1)]<<4|U[B.charCodeAt(k+2)]>>2,q[z++]=E>>8&255,q[z++]=E&255),q}function O(B){return w[B>>18&63]+w[B>>12&63]+w[B>>6&63]+w[B&63]}function A(B,E,R){for(var L,M=[],q=E;q<R;q+=3)L=(B[q]<<16&16711680)+(B[q+1]<<8&65280)+(B[q+2]&255),M.push(O(L));return M.join("")}function C(B){for(var E,R=B.length,L=R%3,M=[],q=16383,z=0,V=R-L;z<V;z+=q)M.push(A(B,z,z+q>V?V:z+q));return L===1?(E=B[R-1],M.push(w[E>>2]+w[E<<4&63]+"==")):L===2&&(E=(B[R-2]<<8)+B[R-1],M.push(w[E>>10]+w[E>>4&63]+w[E<<2&63]+"=")),M.join("")}return me}var Xe;function fe(){if(Xe)return ne;Xe=1,Object.defineProperty(ne,"__esModule",{value:!0}),ne.concatBuffers=U,ne.b64UrlToString=b,ne.bufferToString=m,ne.stringToBuffer=a,ne.stringToB64Url=u,ne.b64UrlToBuffer=s,ne.bufferTob64=h,ne.bufferTob64Url=p,ne.b64UrlEncode=y,ne.b64UrlDecode=O;const w=mt();function U(A){let C=0;for(let R=0;R<A.length;R++)C+=A[R].byteLength;let B=new Uint8Array(C),E=0;B.set(new Uint8Array(A[0]),E),E+=A[0].byteLength;for(let R=1;R<A.length;R++)B.set(new Uint8Array(A[R]),E),E+=A[R].byteLength;return B}function b(A){let C=s(A);return m(C)}function m(A){return new TextDecoder("utf-8",{fatal:!0}).decode(A)}function a(A){return new TextEncoder().encode(A)}function u(A){return p(a(A))}function s(A){return new Uint8Array(w.toByteArray(O(A)))}function h(A){return w.fromByteArray(new Uint8Array(A))}function p(A){return y(h(A))}function y(A){try{return A.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}catch(C){throw new Error("Failed to encode string",{cause:C})}}function O(A){try{A=A.replace(/\-/g,"+").replace(/\_/g,"/");let C;return A.length%4==0?C=0:C=4-A.length%4,A.concat("=".repeat(C))}catch(C){throw new Error("Failed to decode string",{cause:C})}}return ne}var Ve;function vt(){if(Ve)return Ne;Ve=1,Object.defineProperty(Ne,"__esModule",{value:!0});const w=fe();class U{constructor(){I(this,"keyLength",4096);I(this,"publicExponent",65537);I(this,"hashAlgorithm","sha256");I(this,"driver");if(!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let m=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),a=await this.driver.exportKey("jwk",m.privateKey);return{kty:a.kty,e:a.e,n:a.n,d:a.d,p:a.p,q:a.q,dp:a.dp,dq:a.dq,qi:a.qi}}async sign(m,a,{saltLength:u}={}){let s=await this.driver.sign({name:"RSA-PSS",saltLength:u??32},await this.jwkToCryptoKey(m),a);return new Uint8Array(s)}async hash(m,a="SHA-256"){let u=await this.driver.digest(a,m);return new Uint8Array(u)}async verify(m,a,u){const s={kty:"RSA",e:"AQAB",n:m},h=await this.jwkToPublicCryptoKey(s),p=await this.driver.digest("SHA-256",a),y=await this.driver.verify({name:"RSA-PSS",saltLength:0},h,u,a),O=await this.driver.verify({name:"RSA-PSS",saltLength:32},h,u,a),A=Math.ceil((h.algorithm.modulusLength-1)/8)-p.byteLength-2,C=await this.driver.verify({name:"RSA-PSS",saltLength:A},h,u,a),B=y||O||C;if(!B){const E={algorithm:h.algorithm.name,modulusLength:h.algorithm.modulusLength,keyUsages:h.usages,saltLengthsAttempted:`0, 32, ${A}`};console.warn(`Transaction Verification Failed! 
`,`Details: ${JSON.stringify(E,null,2)} 
`,"N.B. ArweaveJS is only guaranteed to verify txs created using ArweaveJS.")}return B}async jwkToCryptoKey(m){return this.driver.importKey("jwk",m,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(m){return this.driver.importKey("jwk",m,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if(typeof crypto>"u")return!1;const m=crypto==null?void 0:crypto.subtle;return m===void 0?!1:["generateKey","importKey","exportKey","digest","sign"].every(u=>typeof m[u]=="function")}async encrypt(m,a,u){const s=await this.driver.importKey("raw",typeof a=="string"?w.stringToBuffer(a):a,{name:"PBKDF2",length:32},!1,["deriveKey"]),h=await this.driver.deriveKey({name:"PBKDF2",salt:u?w.stringToBuffer(u):w.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},s,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),p=new Uint8Array(16);crypto.getRandomValues(p);const y=await this.driver.encrypt({name:"AES-CBC",iv:p},h,m);return w.concatBuffers([p,y])}async decrypt(m,a,u){const s=await this.driver.importKey("raw",typeof a=="string"?w.stringToBuffer(a):a,{name:"PBKDF2",length:32},!1,["deriveKey"]),h=await this.driver.deriveKey({name:"PBKDF2",salt:u?w.stringToBuffer(u):w.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},s,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),p=m.slice(0,16),y=await this.driver.decrypt({name:"AES-CBC",iv:p},h,m.slice(16));return w.concatBuffers([y])}}return Ne.default=U,Ne}var Be={},Ze;function Tt(){if(Ze)return Be;Ze=1,Object.defineProperty(Be,"__esModule",{value:!0});class w{constructor(b){I(this,"api");this.api=b}getInfo(){return this.api.get("info").then(b=>b.data)}getPeers(){return this.api.get("peers").then(b=>b.data)}}return Be.default=w,Be}var Oe={},ve={},Ye;function Pe(){if(Ye)return ve;Ye=1,Object.defineProperty(ve,"__esModule",{value:!0}),ve.getError=U;class w extends Error{constructor(u,s={}){var a=(...b)=>(super(...b),I(this,"type"),I(this,"response"),this);s.message?a(s.message):a(),this.type=u,this.response=s.response}getType(){return this.type}}ve.default=w;function U(m){let a=m.data;if(typeof m.data=="string")try{a=JSON.parse(m.data)}catch{}if(m.data instanceof ArrayBuffer||m.data instanceof Uint8Array)try{a=JSON.parse(a.toString())}catch{}return a?a.error||a:m.statusText||"unknown"}return ve}var pe={},Re={},Qe;function _t(){if(Qe)return Re;Qe=1,Object.defineProperty(Re,"__esModule",{value:!0}),Re.default=U;const w=Ie();async function U(m){if(Array.isArray(m)){const s=w.default.utils.concatBuffers([w.default.utils.stringToBuffer("list"),w.default.utils.stringToBuffer(m.length.toString())]);return await b(m,await w.default.crypto.hash(s,"SHA-384"))}const a=w.default.utils.concatBuffers([w.default.utils.stringToBuffer("blob"),w.default.utils.stringToBuffer(m.byteLength.toString())]),u=w.default.utils.concatBuffers([await w.default.crypto.hash(a,"SHA-384"),await w.default.crypto.hash(m,"SHA-384")]);return await w.default.crypto.hash(u,"SHA-384")}async function b(m,a){if(m.length<1)return a;const u=w.default.utils.concatBuffers([a,await U(m[0])]),s=await w.default.crypto.hash(u,"SHA-384");return await b(m.slice(1),s)}return Re}var He={},et;function lt(){return et||(et=1,function(w){Object.defineProperty(w,"__esModule",{value:!0}),w.arrayCompare=w.MIN_CHUNK_SIZE=w.MAX_CHUNK_SIZE=void 0,w.chunkData=u,w.generateLeaves=s,w.computeRootHash=h,w.generateTree=p,w.generateTransactionChunks=y,w.buildLayers=O,w.generateProofs=A,w.arrayFlatten=B,w.intToBuffer=L,w.bufferToInt=M,w.validatePath=z,w.debug=V;const U=Ie(),b=fe();w.MAX_CHUNK_SIZE=256*1024,w.MIN_CHUNK_SIZE=32*1024;const m=32,a=32;async function u(k){let T=[],_=k,x=0;for(;_.byteLength>=w.MAX_CHUNK_SIZE;){let $=w.MAX_CHUNK_SIZE,S=_.byteLength-w.MAX_CHUNK_SIZE;S>0&&S<w.MIN_CHUNK_SIZE&&($=Math.ceil(_.byteLength/2));const j=_.slice(0,$),H=await U.default.crypto.hash(j);x+=j.byteLength,T.push({dataHash:H,minByteRange:x-j.byteLength,maxByteRange:x}),_=_.slice($)}return T.push({dataHash:await U.default.crypto.hash(_),minByteRange:x,maxByteRange:x+_.byteLength}),T}async function s(k){return Promise.all(k.map(async({dataHash:T,minByteRange:_,maxByteRange:x})=>({type:"leaf",id:await R(await Promise.all([R(T),R(L(x))])),dataHash:T,minByteRange:_,maxByteRange:x})))}async function h(k){return(await p(k)).id}async function p(k){return await O(await s(await u(k)))}async function y(k){const T=await u(k),_=await s(T),x=await O(_),$=await A(x),S=T.slice(-1)[0];return S.maxByteRange-S.minByteRange===0&&(T.splice(T.length-1,1),$.splice($.length-1,1)),{data_root:x.id,chunks:T,proofs:$}}async function O(k,T=0){if(k.length<2)return k[0];const _=[];for(let x=0;x<k.length;x+=2)_.push(await E(k[x],k[x+1]));return O(_,T+1)}function A(k){const T=C(k);return Array.isArray(T)?B(T):[T]}function C(k,T=new Uint8Array,_=0){if(k.type=="leaf")return{offset:k.maxByteRange-1,proof:(0,b.concatBuffers)([T,k.dataHash,L(k.maxByteRange)])};if(k.type=="branch"){const x=(0,b.concatBuffers)([T,k.leftChild.id,k.rightChild.id,L(k.byteRange)]);return[C(k.leftChild,x,_+1),C(k.rightChild,x,_+1)]}throw new Error("Unexpected node type")}function B(k){const T=[];return k.forEach(_=>{Array.isArray(_)?T.push(...B(_)):T.push(_)}),T}async function E(k,T){return T?{type:"branch",id:await R([await R(k.id),await R(T.id),await R(L(k.maxByteRange))]),byteRange:k.maxByteRange,maxByteRange:T.maxByteRange,leftChild:k,rightChild:T}:k}async function R(k){return Array.isArray(k)&&(k=U.default.utils.concatBuffers(k)),new Uint8Array(await U.default.crypto.hash(k))}function L(k){const T=new Uint8Array(m);for(var _=T.length-1;_>=0;_--){var x=k%256;T[_]=x,k=(k-x)/256}return T}function M(k){let T=0;for(var _=0;_<k.length;_++)T*=256,T+=k[_];return T}const q=(k,T)=>k.every((_,x)=>T[x]===_);w.arrayCompare=q;async function z(k,T,_,x,$){if(x<=0)return!1;if(T>=x)return z(k,0,x-1,x,$);if(T<0)return z(k,0,0,x,$);if($.length==a+m){const ie=$.slice(0,a),re=$.slice(ie.length,ie.length+m),ce=await R([await R(ie),await R(re)]);return(0,w.arrayCompare)(k,ce)?{offset:x-1,leftBound:_,rightBound:x,chunkSize:x-_}:!1}const S=$.slice(0,a),j=$.slice(S.length,S.length+a),H=$.slice(S.length+j.length,S.length+j.length+m),G=M(H),Y=$.slice(S.length+j.length+H.length),ee=await R([await R(S),await R(j),await R(H)]);return(0,w.arrayCompare)(k,ee)?T<G?await z(S,T,_,Math.min(x,G),Y):await z(j,T,Math.max(_,G),x,Y):!1}async function V(k,T=""){if(k.byteLength<1)return T;const _=k.slice(0,a),x=k.slice(_.length,_.length+a),$=k.slice(_.length+x.length,_.length+x.length+m),S=M($),j=k.slice(_.length+x.length+$.length),H=await R([await R(_),await R(x),await R($)]),G=`${T}
${JSON.stringify(Buffer.from(_))},${JSON.stringify(Buffer.from(x))},${S} => ${JSON.stringify(H)}`;return V(j,G)}}(He)),He}var tt;function Ke(){if(tt)return pe;tt=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.Tag=void 0;const w=fe(),U=_t(),b=lt();class m{get(h,p){if(!Object.getOwnPropertyNames(this).includes(h))throw new Error(`Field "${h}" is not a property of the Arweave Transaction class.`);if(this[h]instanceof Uint8Array)return p&&p.decode&&p.string?w.bufferToString(this[h]):p&&p.decode&&!p.string?this[h]:w.bufferTob64Url(this[h]);if(this[h]instanceof Array){if((p==null?void 0:p.decode)!==void 0||(p==null?void 0:p.string)!==void 0)throw h==="tags"&&console.warn(`Did you mean to use 'transaction["tags"]' ?`),new Error("Cannot decode or stringify an array.");return this[h]}return p&&p.decode==!0?p&&p.string?w.b64UrlToString(this[h]):w.b64UrlToBuffer(this[h]):this[h]}}class a extends m{constructor(p,y,O=!1){super();I(this,"name");I(this,"value");this.name=p,this.value=y}}pe.Tag=a;class u extends m{constructor(p={}){super();I(this,"format",2);I(this,"id","");I(this,"last_tx","");I(this,"owner","");I(this,"tags",[]);I(this,"target","");I(this,"quantity","0");I(this,"data_size","0");I(this,"data",new Uint8Array);I(this,"data_root","");I(this,"reward","0");I(this,"signature","");I(this,"chunks");Object.assign(this,p),typeof this.data=="string"&&(this.data=w.b64UrlToBuffer(this.data)),p.tags&&(this.tags=p.tags.map(y=>new a(y.name,y.value)))}addTag(p,y){this.tags.push(new a(w.stringToB64Url(p),w.stringToB64Url(y)))}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:w.bufferTob64Url(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setOwner(p){this.owner=p}setSignature({id:p,owner:y,reward:O,tags:A,signature:C}){this.id=p,this.owner=y,O&&(this.reward=O),A&&(this.tags=A),this.signature=C}async prepareChunks(p){!this.chunks&&p.byteLength>0&&(this.chunks=await(0,b.generateTransactionChunks)(p),this.data_root=w.bufferTob64Url(this.chunks.data_root)),!this.chunks&&p.byteLength===0&&(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(p,y){if(!this.chunks)throw new Error("Chunks have not been prepared");const O=this.chunks.proofs[p],A=this.chunks.chunks[p];return{data_root:this.data_root,data_size:this.data_size,data_path:w.bufferTob64Url(O.proof),offset:O.offset.toString(),chunk:w.bufferTob64Url(y.slice(A.minByteRange,A.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:let p=this.tags.reduce((O,A)=>w.concatBuffers([O,A.get("name",{decode:!0,string:!1}),A.get("value",{decode:!0,string:!1})]),new Uint8Array);return w.concatBuffers([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),w.stringToBuffer(this.quantity),w.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),p]);case 2:this.data_root||await this.prepareChunks(this.data);const y=this.tags.map(O=>[O.get("name",{decode:!0,string:!1}),O.get("value",{decode:!0,string:!1})]);return await(0,U.default)([w.stringToBuffer(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),w.stringToBuffer(this.quantity),w.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),y,w.stringToBuffer(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw new Error(`Unexpected transaction format: ${this.format}`)}}}return pe.default=u,pe}var Te={},rt;function Et(){if(rt)return Te;rt=1,Object.defineProperty(Te,"__esModule",{value:!0}),Te.TransactionUploader=void 0;const w=Ke(),U=fe(),b=Pe(),m=lt(),a=1,u=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"],s=1e3*40;class h{constructor(y,O){I(this,"api");I(this,"chunkIndex",0);I(this,"txPosted",!1);I(this,"transaction");I(this,"lastRequestTimeEnd",0);I(this,"totalErrors",0);I(this,"data");I(this,"lastResponseStatus",0);I(this,"lastResponseError","");if(this.api=y,!O.id)throw new Error("Transaction is not signed");if(!O.chunks)throw new Error("Transaction chunks not prepared");this.data=O.data,this.transaction=new w.default(Object.assign({},O,{data:new Uint8Array(0)}))}get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}async uploadChunk(y){if(this.isComplete)throw new Error("Upload is already complete");if(this.lastResponseError!==""?this.totalErrors++:this.totalErrors=0,this.totalErrors===100)throw new Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let O=this.lastResponseError===""?0:Math.max(this.lastRequestTimeEnd+s-Date.now(),s);if(O>0&&(O=O-O*Math.random()*.3,await new Promise(E=>setTimeout(E,O))),this.lastResponseError="",!this.txPosted){await this.postTransaction();return}y&&(this.chunkIndex=y);const A=this.transaction.getChunk(y||this.chunkIndex,this.data);if(!await(0,m.validatePath)(this.transaction.chunks.data_root,parseInt(A.offset),0,parseInt(A.data_size),U.b64UrlToBuffer(A.data_path)))throw new Error(`Unable to validate chunk ${this.chunkIndex}`);const B=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch(E=>(console.error(E.message),{status:-1,data:{error:E.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=B.status,this.lastResponseStatus==200)this.chunkIndex++;else if(this.lastResponseError=(0,b.getError)(B),u.includes(this.lastResponseError))throw new Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized(y,O,A){if(!O||typeof O.chunkIndex!="number"||typeof O.transaction!="object")throw new Error("Serialized object does not match expected format.");var C=new w.default(O.transaction);C.chunks||await C.prepareChunks(A);const B=new h(y,C);if(B.chunkIndex=O.chunkIndex,B.lastRequestTimeEnd=O.lastRequestTimeEnd,B.lastResponseError=O.lastResponseError,B.lastResponseStatus=O.lastResponseStatus,B.txPosted=O.txPosted,B.data=A,B.transaction.data_root!==O.transaction.data_root)throw new Error("Data mismatch: Uploader doesn't match provided data.");return B}static async fromTransactionId(y,O){const A=await y.get(`tx/${O}`);if(A.status!==200)throw new Error(`Tx ${O} not found: ${A.status}`);const C=A.data;return C.data=new Uint8Array(0),{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:C}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=a){this.transaction.data=this.data;const A=await this.api.post("tx",this.transaction).catch(C=>(console.error(C),{status:-1,data:{error:C.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=A.status,this.transaction.data=new Uint8Array(0),A.status>=200&&A.status<300){this.txPosted=!0,this.chunkIndex=a;return}throw this.lastResponseError=(0,b.getError)(A),new Error(`Unable to upload transaction: ${A.status}, ${this.lastResponseError}`)}const O=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=O.status,!(O.status>=200&&O.status<300))throw this.lastResponseError=(0,b.getError)(O),new Error(`Unable to upload transaction: ${O.status}, ${this.lastResponseError}`);this.txPosted=!0}}return Te.TransactionUploader=h,Te}var nt;function At(){if(nt)return Oe;nt=1,Object.defineProperty(Oe,"__esModule",{value:!0});const w=Pe(),U=Ke(),b=fe(),m=Et();class a{constructor(s,h,p){I(this,"api");I(this,"crypto");I(this,"chunks");this.api=s,this.crypto=h,this.chunks=p}async getTransactionAnchor(){const s=await this.api.get("tx_anchor");if(!s.data.match(/^[a-z0-9_-]{43,}/i)||!s.ok)throw new Error(`Could not getTransactionAnchor. Received: ${s.data}. Status: ${s.status}, ${s.statusText}`);return s.data}async getPrice(s,h){let p=h?`price/${s}/${h}`:`price/${s}`;const y=await this.api.get(p);if(!/^\d+$/.test(y.data)||!y.ok)throw new Error(`Could not getPrice. Received: ${y.data}. Status: ${y.status}, ${y.statusText}`);return y.data}async get(s){const h=await this.api.get(`tx/${s}`);if(h.status==200){const p=parseInt(h.data.data_size);if(h.data.format>=2&&p>0&&p<=1024*1024*12){const y=await this.getData(s);return new U.default({...h.data,data:y})}return new U.default({...h.data,format:h.data.format||1})}throw h.status==404?new w.default("TX_NOT_FOUND"):h.status==410?new w.default("TX_FAILED"):new w.default("TX_INVALID")}fromRaw(s){return new U.default(s)}async search(s,h){return this.api.post("arql",{op:"equals",expr1:s,expr2:h}).then(p=>p.data?p.data:[])}getStatus(s){return this.api.get(`tx/${s}/status`).then(h=>h.status==200?{status:200,confirmed:h.data}:{status:h.status,confirmed:null})}async getData(s,h){let p;try{p=await this.chunks.downloadChunkedData(s)}catch(y){console.error(`Error while trying to download chunked data for ${s}`),console.error(y)}if(!p){console.warn(`Falling back to gateway cache for ${s}`);try{const{data:y,ok:O,status:A,statusText:C}=await this.api.get(`/${s}`,{responseType:"arraybuffer"});if(!O)throw new Error("Bad http status code",{cause:{status:A,statusText:C}});p=y}catch(y){console.error(`Error while trying to download contiguous data from gateway cache for ${s}`),console.error(y)}}if(!p)throw new Error(`${s} data was not found!`);return h&&h.decode&&!h.string?p:h&&h.decode&&h.string?b.bufferToString(p):b.bufferTob64Url(p)}async sign(s,h,p){const O=typeof h=="object"&&(C=>{let B=!0;return["n","e","d","p","q","dp","dq","qi"].map(E=>!(E in C)&&(B=!1)),B})(h),A=typeof arweaveWallet=="object";if(!O&&!A)throw new Error("No valid JWK or external wallet found to sign transaction.");if(O){s.setOwner(h.n);let C=await s.getSignatureData(),B=await this.crypto.sign(h,C,p),E=await this.crypto.hash(B);s.setSignature({id:b.bufferTob64Url(E),owner:h.n,signature:b.bufferTob64Url(B)})}else if(A){try{(await arweaveWallet.getPermissions()).includes("SIGN_TRANSACTION")||await arweaveWallet.connect(["SIGN_TRANSACTION"])}catch{}const C=await arweaveWallet.sign(s,p);s.setSignature({id:C.id,owner:C.owner,reward:C.reward,tags:C.tags,signature:C.signature})}else throw new Error("An error occurred while signing. Check wallet is valid")}async verify(s){const h=await s.getSignatureData(),p=s.get("signature",{decode:!0,string:!1}),y=b.bufferTob64Url(await this.crypto.hash(p));if(s.id!==y)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(s.owner,h,p)}async post(s){if(typeof s=="string"?s=new U.default(JSON.parse(s)):typeof s.readInt32BE=="function"?s=new U.default(JSON.parse(s.toString())):typeof s=="object"&&!(s instanceof U.default)&&(s=new U.default(s)),!(s instanceof U.default))throw new Error("Must be Transaction object");s.chunks||await s.prepareChunks(s.data);const h=await this.getUploader(s,s.data);try{for(;!h.isComplete;)await h.uploadChunk()}catch(p){if(h.lastResponseStatus>0)return{status:h.lastResponseStatus,statusText:h.lastResponseError,data:{error:h.lastResponseError}};throw p}return{status:200,statusText:"OK",data:{}}}async getUploader(s,h){let p;if(h instanceof ArrayBuffer&&(h=new Uint8Array(h)),s instanceof U.default){if(h||(h=s.data),!(h instanceof Uint8Array))throw new Error("Data format is invalid");s.chunks||await s.prepareChunks(h),p=new m.TransactionUploader(this.api,s),(!p.data||p.data.length===0)&&(p.data=h)}else{if(typeof s=="string"&&(s=await m.TransactionUploader.fromTransactionId(this.api,s)),!h||!(h instanceof Uint8Array))throw new Error("Must provide data when resuming upload");p=await m.TransactionUploader.fromSerialized(this.api,s,h)}return p}async*upload(s,h){const p=await this.getUploader(s,h);for(;!p.isComplete;)await p.uploadChunk(),yield p;return p}}return Oe.default=a,Oe}var Ce={},at;function St(){if(at)return Ce;at=1,Object.defineProperty(Ce,"__esModule",{value:!0});const w=fe();class U{constructor(m,a){I(this,"api");I(this,"crypto");this.api=m,this.crypto=a}getBalance(m){return this.api.get(`wallet/${m}/balance`).then(a=>a.data)}getLastTransactionID(m){return this.api.get(`wallet/${m}/last_tx`).then(a=>a.data)}generate(){return this.crypto.generateJWK()}async jwkToAddress(m){return!m||m==="use_wallet"?this.getAddress():this.getAddress(m)}async getAddress(m){if(!m||m==="use_wallet"){try{await arweaveWallet.connect(["ACCESS_ADDRESS"])}catch{}return arweaveWallet.getActiveAddress()}else return this.ownerToAddress(m.n)}async ownerToAddress(m){return w.bufferTob64Url(await this.crypto.hash(w.b64UrlToBuffer(m)))}}return Ce.default=U,Ce}var we={},st;function kt(){if(st)return we;st=1,Object.defineProperty(we,"__esModule",{value:!0}),we.SiloResource=void 0;const w=fe();class U{constructor(a,u,s){I(this,"api");I(this,"crypto");I(this,"transactions");this.api=a,this.crypto=u,this.transactions=s}async get(a){if(!a)throw new Error("No Silo URI specified");const u=await this.parseUri(a),s=await this.transactions.search("Silo-Name",u.getAccessKey());if(s.length==0)throw new Error(`No data could be found for the Silo URI: ${a}`);const h=await this.transactions.get(s[0]);if(!h)throw new Error(`No data could be found for the Silo URI: ${a}`);const p=h.get("data",{decode:!0,string:!1});return this.crypto.decrypt(p,u.getEncryptionKey())}async readTransactionData(a,u){if(!u)throw new Error("No Silo URI specified");const s=await this.parseUri(u),h=a.get("data",{decode:!0,string:!1});return this.crypto.decrypt(h,s.getEncryptionKey())}async parseUri(a){const u=a.match(/^([a-z0-9-_]+)\.([0-9]+)/i);if(!u)throw new Error("Invalid Silo name, must be a name in the format of [a-z0-9]+.[0-9]+, e.g. 'bubble.7'");const s=u[1],h=Math.pow(2,parseInt(u[2])),p=await this.hash(w.stringToBuffer(s),h),y=w.bufferTob64(p.slice(0,15)),O=await this.hash(p.slice(16,31),1);return new b(a,y,O)}async hash(a,u){let s=await this.crypto.hash(a);for(let h=0;h<u-1;h++)s=await this.crypto.hash(s);return s}}we.default=U;class b{constructor(a,u,s){I(this,"uri");I(this,"accessKey");I(this,"encryptionKey");this.uri=a,this.accessKey=u,this.encryptionKey=s}getUri(){return this.uri}getAccessKey(){return this.accessKey}getEncryptionKey(){return this.encryptionKey}}return we.SiloResource=b,we}var Ue={},it;function Nt(){if(it)return Ue;it=1,Object.defineProperty(Ue,"__esModule",{value:!0});const w=Pe(),U=fe();class b{constructor(a){I(this,"api");this.api=a}async getTransactionOffset(a){const u=await this.api.get(`tx/${a}/offset`);if(u.status===200)return u.data;throw new Error(`Unable to get transaction offset: ${(0,w.getError)(u)}`)}async getChunk(a){const u=await this.api.get(`chunk/${a}`);if(u.status===200)return u.data;throw new Error(`Unable to get chunk: ${(0,w.getError)(u)}`)}async getChunkData(a){const u=await this.getChunk(a);return U.b64UrlToBuffer(u.chunk)}firstChunkOffset(a){return parseInt(a.offset)-parseInt(a.size)+1}async downloadChunkedData(a){const u=await this.getTransactionOffset(a),s=parseInt(u.size),p=parseInt(u.offset)-s+1,y=new Uint8Array(s);let O=0;for(;O<s;){this.api.config.logging&&console.log(`[chunk] ${O}/${s}`);let A;try{A=await this.getChunkData(p+O)}catch{console.error(`[chunk] Failed to fetch chunk at offset ${p+O}`),console.error("[chunk] This could indicate that the chunk wasn't uploaded or hasn't yet seeded properly to a particular gateway/node")}if(A)y.set(A,O),O+=A.length;else throw new Error(`Couldn't complete data download at ${O}/${s}`)}return y}}return Ue.default=b,Ue}var xe={},ot;function Bt(){if(ot)return xe;ot=1,Object.defineProperty(xe,"__esModule",{value:!0});const w=Pe(),b=class b{constructor(a,u){I(this,"api");I(this,"network");this.api=a,this.network=u}async get(a){const u=await this.api.get(`${b.HASH_ENDPOINT}${a}`);if(u.status===200)return u.data;throw u.status===404?new w.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${u}`)}async getByHeight(a){const u=await this.api.get(`${b.HEIGHT_ENDPOINT}${a}`);if(u.status===200)return u.data;throw u.status===404?new w.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${u}`)}async getCurrent(){const{current:a}=await this.network.getInfo();return await this.get(a)}};I(b,"HASH_ENDPOINT","block/hash/"),I(b,"HEIGHT_ENDPOINT","block/height/");let U=b;return xe.default=U,xe}var ct;function Ie(){if(ct)return Ae;ct=1,Object.defineProperty(Ae,"__esModule",{value:!0});const w=wt(),U=yt(),b=vt(),m=Tt(),a=At(),u=St(),s=Ke(),h=fe(),p=kt(),y=Nt(),O=Bt(),C=class C{constructor(E){I(this,"api");I(this,"wallets");I(this,"transactions");I(this,"network");I(this,"blocks");I(this,"ar");I(this,"silo");I(this,"chunks");this.api=new U.default(E),this.wallets=new u.default(this.api,C.crypto),this.chunks=new y.default(this.api),this.transactions=new a.default(this.api,C.crypto,this.chunks),this.silo=new p.default(this.api,this.crypto,this.transactions),this.network=new m.default(this.api),this.blocks=new O.default(this.api,this.network),this.ar=new w.default}get crypto(){return C.crypto}get utils(){return C.utils}getConfig(){return{api:this.api.getConfig(),crypto:null}}async createTransaction(E,R){const L={};if(Object.assign(L,E),!E.data&&!(E.target&&E.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(E.owner==null&&R&&R!=="use_wallet"&&(L.owner=R.n),E.last_tx==null&&(L.last_tx=await this.transactions.getTransactionAnchor()),typeof E.data=="string"&&(E.data=h.stringToBuffer(E.data)),E.data instanceof ArrayBuffer&&(E.data=new Uint8Array(E.data)),E.data&&!(E.data instanceof Uint8Array))throw new Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(E.reward==null){const q=E.data?E.data.byteLength:0;L.reward=await this.transactions.getPrice(q,L.target)}L.data_root="",L.data_size=E.data?E.data.byteLength.toString():"0",L.data=E.data||new Uint8Array(0);const M=new s.default(L);return await M.getSignatureData(),M}async createSiloTransaction(E,R,L){const M={};if(Object.assign(M,E),!E.data)throw new Error("Silo transactions must have a 'data' value");if(!L)throw new Error("No Silo URI specified.");if(E.target||E.quantity)throw new Error("Silo transactions can only be used for storing data, sending AR to other wallets isn't supported.");if(E.owner==null){if(!R||!R.n)throw new Error("A new Arweave transaction must either have an 'owner' attribute, or you must provide the jwk parameter.");M.owner=R.n}E.last_tx==null&&(M.last_tx=await this.transactions.getTransactionAnchor());const q=await this.silo.parseUri(L);if(typeof E.data=="string"){const V=await this.crypto.encrypt(h.stringToBuffer(E.data),q.getEncryptionKey());M.reward=await this.transactions.getPrice(V.byteLength),M.data=h.bufferTob64Url(V)}if(E.data instanceof Uint8Array){const V=await this.crypto.encrypt(E.data,q.getEncryptionKey());M.reward=await this.transactions.getPrice(V.byteLength),M.data=h.bufferTob64Url(V)}const z=new s.default(M);return z.addTag("Silo-Name",q.getAccessKey()),z.addTag("Silo-Version","0.1.0"),z}arql(E){return this.api.post("/arql",E).then(R=>R.data||[])}};I(C,"init"),I(C,"crypto",new b.default),I(C,"utils",h);let A=C;return Ae.default=A,Ae}var _e={},ut;function Ot(){if(ut)return _e;ut=1,Object.defineProperty(_e,"__esModule",{value:!0}),_e.getDefaultConfig=void 0;const w=(m,a)=>{const u=/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,s=a.split("."),h=s[s.length-1],p=["localhost","[::1]"];return p.includes(a)||m=="file"||p.includes(h)||!!a.match(u)||!!h.match(u)},U=m=>{const a=m.charAt(0)==="[",u=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/;return!!m.match(u)||a},b=(m,a)=>{if(w(m,a))return{protocol:"https",host:"arweave.net",port:443};if(!U(a)){let u=a.split(".");if(u.length>=3){u.shift();const s=u.join(".");return{protocol:m,host:s}}}return{protocol:m,host:a}};return _e.getDefaultConfig=b,_e}var ft;function Ct(){return ft||(ft=1,function(w){var U=de&&de.__createBinding||(Object.create?function(u,s,h,p){p===void 0&&(p=h);var y=Object.getOwnPropertyDescriptor(s,h);(!y||("get"in y?!s.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return s[h]}}),Object.defineProperty(u,p,y)}:function(u,s,h,p){p===void 0&&(p=h),u[p]=s[h]}),b=de&&de.__exportStar||function(u,s){for(var h in u)h!=="default"&&!Object.prototype.hasOwnProperty.call(s,h)&&U(s,u,h)};Object.defineProperty(w,"__esModule",{value:!0});const m=Ie(),a=Ot();m.default.init=function(u={}){const s={host:"arweave.net",port:443,protocol:"https"};if(typeof location!="object"||!location.protocol||!location.hostname)return new m.default({...u,...s});const h=location.protocol.replace(":",""),p=location.hostname,y=location.port?parseInt(location.port):h=="https"?443:80,O=(0,a.getDefaultConfig)(h,p),A=u.protocol||O.protocol,C=u.host||O.host,B=u.port||O.port||y;return new m.default({...u,host:C,protocol:A,port:B})},typeof globalThis=="object"?globalThis.Arweave=m.default:typeof self=="object"&&(self.Arweave=m.default),b(Ie(),w),w.default=m.default}(de)),de}export{Ct as r};
